package com.sample
import java.util.ArrayList;
import javax.swing.JFrame;
import java.util.ArrayList
import javax.swing.JOptionPane;

declare Question
	question : String
	answers : ArrayList
	answer : String
end

global JFrame frame 
function void askQuestionMoreThanTwo(JFrame frame,Question q){
	String[] answers = (String[])q.getAnswers().toArray(new String[q.getAnswers().size()]);
	String answer = (String)JOptionPane.showInputDialog(frame,
                                             q.getQuestion(),
                                             "Question",
                                             JOptionPane.PLAIN_MESSAGE,
                                             null,
                                             answers,
                                             answers[0]);
    if ((answer != null) && (answer.length() > 0)) {
    	q.setAnswer(answer);
	}
} 

function void askQuestion(JFrame frame,Question q){
	String[] answers = (String[])q.getAnswers().toArray(new String[q.getAnswers().size()]);
	String answer = (String)JOptionPane.showInputDialog(frame,
                                             q.getQuestion(),
                                             "Question",
                                             JOptionPane.PLAIN_MESSAGE,
                                             null,
                                             answers,
                                             answers[0]);
    if ((answer != null) && (answer.length() > 0)) {
    	q.setAnswer(answer);
	}
}

rule "Init"
	when
	then
		ArrayList<String> answers = new ArrayList<>();
		answers.add("Drama");
		answers.add("Comedy");
		answers.add("A little of both");
		Question q = new Question("Drama or Comedy",answers,null);
		frame = new JFrame();
		insert(q);
end
 
rule "Asking question with multiple answers"
	when
		q : Question(getAnswer() == null, getAnswers().size()>2)
    then
    	askQuestionMoreThanTwo(frame,q);    	
		update(q);
end

rule "Asking question with two answers"
	when
		q : Question(getAnswer() == null, getAnswers().size()==2)
    then
    	askQuestion(frame,q);    	
		update(q);
end

rule "Drama"
	when 
		Question(getAnswer() == "Drama", getQuestion() == "Drama or Comedy")
	then
		ArrayList<String> answers = new ArrayList<>();
		answers.add("Yes");
		answers.add("No");
		Question q = new Question("Do you like sci-fi or supernatural shows?",answers,null);
		insert(q);
end